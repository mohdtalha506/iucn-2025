import toolContent from "../assets/defaultToolData.json";

export const toolMeta = [
  {
    id: 1,
    category: "POLICY AND LEGAL FRAMEWORK",
    menu: [
      "Effectively and fairly reinforce laws and regulations",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 2,
    category: "POLICY AND LEGAL FRAMEWORK",
    menu: [],
  },
  {
    id: 3,
    category: "SPATIAL PLANNING",
    menu: [
      "Manage access, resource use and visitation",
      "Design for long-term conservation of major site values",
    ],
  },
  {
    id: 4,
    category: "SPATIAL PLANNING",
    menu: ["Manage ecological condition"],
  },
  {
    id: 5,
    category: "SPATIAL PLANNING",
    menu: [
      "Governance",
      "Effectively and fairly reinforce laws and regulations",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 6,
    category: "SPATIAL PLANNING",
    menu: [],
  },
  {
    id: 7,
    category: "SPATIAL PLANNING",
    menu: ["Identify and understand major site values", "Manage Threat"],
  },
  {
    id: 8,
    category: "SPATIAL PLANNING",
    menu: ["Manage Threat", "Manage access, resource use and visitation"],
  },
  {
    id: 9,
    category: "SPATIAL PLANNING",
    menu: ["Manage access, resource use and visitation"],
  },
  {
    id: 10,
    category: "SPATIAL PLANNING",
    menu: [
      "Manage ecological condition",
      "Manage Threat",
      "Achieve transparency and accountability",
      "Understand threats and challenges to major site values",
      "Demonstrate conservation of major cultural values",
    ],
  },
  {
    id: 11,
    category: "SPATIAL PLANNING",
    menu: [
      "Design for long-term conservation of major site values",
      "Conservation of values",
    ],
  },
  {
    id: 12,
    category: "SPATIAL PLANNING",
    menu: [
      "Design for long-term conservation of major site values",
      "Transparency and accountability",
    ],
  },
  {
    id: 13,
    category: "SPATIAL PLANNING",
    menu: [
      "Design for long-term conservation of major site values",
      "Conservation of values",
    ],
  },
  {
    id: 14,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Governance",
      "Manage Threat",
      "Develop and implement long-term management strategy",
      "Understand threats and challenges to major site values",
      "Design for long-term conservation of major site values",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 15,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Governance",
      "Develop and implement long-term management strategy",
      "Design for long-term conservation of major site values",
      "Identify and understand major site values",
    ],
  },
  {
    id: 16,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Governance",
      "Manage Threat",
      "Understand threats and challenges to major site values",
      "Design for long-term conservation of major site values",
      "Identify and understand major site values",
    ],
  },
  {
    id: 17,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Understand threats and challenges to major site values",
      "Design for long-term conservation of major site values",
      "Achieve Transparency and accountability",
    ],
  },
  {
    id: 18,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Develop and implement long-term management strategy",
      "Design for long-term conservation of major site values",
      "Manage ecological condition",
      "Manage access, resource use and visitation",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 19,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Identify and understand major site values",
      "Design for long-term conservation of major site values",
      "Manage access, resource use and visitation",
      "Manage ecological condition",
      "Demonstrate conservation of major site values",
    ],
  },
  {
    id: 20,
    category: "MANAGEMENT PLANNING",
    menu: [
      "Governance",
      "Develop and implement long-term management strategy",
      "Understand the social and economic context",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 21,
    category: "PROTECTED AREA FINANCING",
    menu: ["Measure success"],
  },
  {
    id: 22,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Governance",
      "Design for long-term conservation of major site values",
      "Effectively and fairly reinforce laws and regulations",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 23,
    category: "PROTECTED AREA FINANCING",
    menu: ["Manage access, resource use and visitation"],
  },
  {
    id: 24,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 25,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Understand the social and economic context",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 26,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Governance",
      "Design for long-term conservation of major site values",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 27,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Understand the social and economic context",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
      "Demonstrate conservation of major cultural values",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 28,
    category: "PROTECTED AREA FINANCING",
    menu: [
      "Design for long-term conservation of major site values",
      "Manage ecological condition",
      "Measure success",
    ],
  },
  {
    id: 29,
    category: "PROTECTED AREA FINANCING",
    menu: [],
  },
  {
    id: 30,
    category: "PROTECTED AREA FINANCING",
    menu: ["Manage access, resource use and visitation"],
  },
  {
    id: 31,
    category: "CAPACITY DEVELOPMENT",
    menu: [
      "Design for long-term conservation of major site values",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 32,
    category: "CAPACITY DEVELOPMENT",
    menu: [
      "Develop and implement long-term management strategy",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 33,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [],
  },
  {
    id: 34,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Governance",
      "Manage Threat",
      "Develop and implement long-term management strategy",
      "Understand threats and challenges to major site values",
      "Transparency and accountability",
      "Identify and understand major site values",
      "Manage ecological condition",
      "Conservation of values",
    ],
  },
  {
    id: 35,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Governance",
      "Manage Threat",
      "Develop and implement long-term management strategy",
      "Understand threats and challenges to major site values",
      "Manage ecological condition",
    ],
  },
  {
    id: 36,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Governance",
      "Develop and implement long-term management strategy",
      "Design for long-term conservation of major site values",
      "Understand the social and economic context",
      "Achieve Transparency and accountability",
      "Manage within the social and economic context of the site",
      "Effectively and fairly reinforce laws and regulations",
    ],
  },
  {
    id: 37,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Manage Threat",
      "Develop and implement long-term management strategy",
      "Understand threats and challenges to major site values",
      "Design for long-term conservation of major site values",
      "Identify and understand major site values",
      "Demonstrate conservation of major cultural values",
      "Demonstrate conservation of major site values",
    ],
  },
  {
    id: 38,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Governance",
      "Develop and implement long-term management strategy",
      "Identify and understand major site values",
      "Manage ecological condition",
      "Effectively and fairly reinforce laws and regulations",
      "Demonstrate conservation of major associated ecosystem services",
      "Measure success",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 39,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Design for long-term conservation of major site values",
      "Develop and implement long-term management strategy",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 40,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Manage Threat",
      "Understand threats and challenges to major site values",
      "Manage access, resource use and visitation",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 41,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Design for long-term conservation of major site values",
      "Effectively and fairly reinforce laws and regulations",
      "Measure success",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 42,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Identify and understand major site values",
      "Understand the social and economic context",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
      "Demonstrate conservation of major site values",
      "Governance",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 43,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Governance",
      "Understand the social and economic context",
      "Manage ecological condition",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 44,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Identify and understand major site values",
      "Measure success",
      "Demonstrate conservation of major associated ecosystem services",
    ],
  },
  {
    id: 45,
    category: "ASSESSMENT, MONITORING AND EVALUATION",
    menu: [
      "Identify and understand major site values",
      "Design for long-term conservation of major site values",
      "Demonstrate conservation of major associated ecosystem services",
      "Understand the social and economic context",
      "Manage ecological condition",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 46,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Design for long-term conservation of major site values",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 47,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Achieve Transparency and accountability",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 48,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Understand the social and economic context",
      "Develop and implement long-term management strategy",
      "Manage within the social and economic context of the site",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 49,
    category: "GOVERNANCE",
    menu: [
      "Enable governance vitality and capacity to respond adaptively",
      "Identify and understand major site values",
      "Design for long-term conservation of major site values",
    ],
  },
  {
    id: 50,
    category: "GOVERNANCE",
    menu: [
      "Guarantee legitimacy and voice",
      "Enable governance vitality and capacity to respond adaptively",
      "Achieve transparency and accountability",
      "Understand the social and economic context",
      "Identify and understand major site values",
      "Demonstrate conservation of major cultural values",
      "Manage within the social and economic context of the site",
      "Effectively and fairly reinforce laws and regulations",
    ],
  },
  {
    id: 51,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Achieve transparency and accountability",
      "Identify and understand major site values",
      "Demonstrate conservation of major cultural values",
      "Effectively and fairly reinforce laws and regulations",
    ],
  },
  {
    id: 52,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Manage Threat",
      "Identify and understand major site values",
      "Develop and implement long-term management strategy",
    ],
  },
  {
    id: 53,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Design for long-term conservation of major site values",
      "Develop and implement long-term management strategy",
      "Manage access, resource use and visitation",
    ],
  },
  {
    id: 54,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Identify and understand major site values",
      "Develop and implement long-term management strategy",
      "Manage access, resource use and visitation",
      "Measure success",
    ],
  },
  {
    id: 55,
    category: "GOVERNANCE",
    menu: [
      "Governance",
      "Understand the social and economic context",
      "Manage within the social and economic context of the site",
      "Measure success",
    ],
  },
  {
    id: 56,
    category: "GOVERNANCE",
    menu: ["Governance", "Measure success"],
  },
];

const metaById = toolMeta.reduce((acc, entry) => {
  acc[entry.id] = entry;
  return acc;
}, {});

const normalize = (value) =>
  typeof value === "string" ? value.toLowerCase() : "";

export const toolsData = toolContent.map((tool, index) => {
  const id = Number(tool.route || index + 1);
  const meta = metaById[id] || {};

  return {
    ...tool,
    id,
    number: id,
    categoryLabel: meta.category || tool.category,
    menu: meta.menu || [],
  };
});

export const findToolById = (id) =>
  toolsData.find((tool) => tool.id === Number(id));

export const matchesSearchTerm = (tool, searchTerm) => {
  if (!searchTerm) return true;
  const term = searchTerm.toLowerCase();
  return Object.values(tool).some((value) =>
    normalize(value).includes(term)
  );
};

export const filterTools = ({
  searchTerm,
  searchMenu,
  searchCategory,
} = {}) => {
  let results = [...toolsData];
console.log(results,"resu");

  if (searchMenu) {
    if (Array.isArray(searchMenu)) {
      results = results.filter((tool) =>
        searchMenu.some((entry) => tool.menu.includes(entry))
      );
    } else {
      results = results.filter((tool) => tool.menu.includes(searchMenu));
    }
  } else if (searchCategory) {
    results = results.filter(
      (tool) => normalize(tool.categoryLabel) === normalize(searchCategory)
    );
  } else if (searchTerm) {
    results = results.filter((tool) => matchesSearchTerm(tool, searchTerm));
  } else {
    results = [];
  }

  return results;
};